# Divergence Arena: Trust Bazaar

**Iterated Prisoner's Dilemma with Token Stakes on Solana Devnet**

An autonomous AI experiment where 10 AI-controlled bots compete in a multi-round Prisoner's Dilemma tournament, deployed as a Solana smart contract on devnet. Each bot executes a distinct game-theoretic strategy, plays 200 rounds against every other bot, and stakes tokens on each decision.

Built and executed entirely by AI agents orchestrated through [Loom](https://github.com/rsociety-org/loom) — from smart contract design to deployment to tournament play to analysis.

## Tournament Results

| Rank | Bot | Strategy | Score | Tokens | Combined |
|------|-----|----------|-------|--------|----------|
| 1 | Sentinel | Grim Trigger | 4,859 | 2,212 | 7,071 |
| 2 | Brutus | Always Defect | 4,292 | 1,700 | 5,992 |
| 3 | Oracle | Adaptive Reciprocator | 4,328 | 1,357 | 5,685 |
| 4 | Mercy | Generous TFT | 4,438 | 1,125 | 5,563 |
| 5 | Mirror | Tit-for-Tat | 4,487 | 1,064 | 5,551 |
| 6 | Echo | Pavlov | 4,000 | 485 | 4,485 |
| 7 | Chaos | Random | 3,997 | 436 | 4,433 |
| 8 | Skeptic | Suspicious TFT | 3,739 | 576 | 4,315 |
| 9 | Gandhi | Always Cooperate | 4,053 | 115 | 4,168 |
| 10 | Siren | Trust Exploiter | 3,730 | 2 | 3,732 |

**Winner: Sentinel (Grim Trigger)** — cooperates until betrayed, then permanently defects. Dominated through token preservation: gained 2,339 tokens while losing only 177.

## Key Findings

- **Grim Trigger dominated** by combining high cooperation earnings with near-zero losses after betrayal
- **Always Defect placed 2nd** — strong token extraction but lower game scores from mutual defection
- **Always Cooperate placed 9th** — highest game score cooperation rate (1.0) but bled tokens to exploiters
- **Trust Exploiter (Siren) placed last** — deceptive strategy backfired, ending with only 2 tokens
- **Cooperation paid in score, defection paid in tokens** — the combined metric rewarded balanced strategies

## Architecture

The tournament was executed as a 6-step workflow:

1. **Architect** — Designed Pinocchio smart contract (364 LOC, zero-copy BPF)
2. **Auditor** — Security audit for overflow, underflow, authority checks
3. **Deployer** — Deployed to Solana devnet, initialized game state
4. **Strategist** — Generated 10 bot configurations with diverse strategies
5. **Tournament** — 10 bots played 200 rounds each against all opponents (loop step)
6. **Reporter** — Compiled final leaderboard and analysis

**Program ID:** `8TxT2UMVcCcaVRHGi5765TChe1kdHRmqxREXSUXwmdVs` (Solana devnet)

## Repository Structure

```
programs/trust-bazaar/src/   Smart contract code and architecture
audit/                       Security audit report
deploy/                      Deployment log and program IDs
bots/                        Bot strategy definitions
results/                     Per-bot play results (10 bots)
reports/                     Tournament report and leaderboard
```

## Game Design

- **200 rounds** per bot pair (10 bots = 90 unique matchups = 1,800 rounds per bot)
- **Actions:** Cooperate or Defect
- **Token stakes:** Each bot stakes tokens (1-50) per round
- **Payoff matrix:**
  - Both cooperate: both gain (3 * avg_stake)
  - Both defect: both gain (1 * avg_stake)
  - One defects: defector gains (5 * other_stake), cooperator gains (0) and loses stake
- **Combined score:** game_score + final_token_balance

## Agents

All agents were AI (Claude) running in ephemeral Kubernetes pods, orchestrated by Loom's workflow engine. No human intervention during execution.

---

*Generated by Loom workflow orchestration — Run `2f22816c-176a-4908-84c0-b486f9875c36`*
